<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="My Father Cigars Orders - Field Sales Application">
    <meta name="theme-color" content="#1a1a1a">
    <title>MFC Orders</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="main-nav">
            <div class="nav-brand">
                <h1>MFC Orders</h1>
                <span class="sync-status" id="syncStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">Synced</span>
                </span>
            </div>
            <div class="nav-menu">
                <button class="nav-btn active" data-view="orders">Orders</button>
                <button class="nav-btn" data-view="customers">Customers</button>
                <button class="nav-btn" data-view="products">Products</button>
                <button class="nav-btn" data-view="reports">Reports</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="content">
            <!-- Orders View -->
            <div class="view active" id="ordersView">
                <div class="view-header">
                    <h2>Orders</h2>
                    <button class="btn btn-primary" id="newOrderBtn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        New Order
                    </button>
                </div>
                <div class="orders-list" id="ordersList">
                    <!-- Orders will be populated here -->
                </div>
            </div>

            <!-- Customers View -->
            <div class="view" id="customersView">
                <div class="view-header">
                    <h2>Customers</h2>
                    <button class="btn btn-primary" id="newCustomerBtn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        New Customer
                    </button>
                </div>
                <div class="customer-filters">
                    <div class="state-filters">
                        <button class="state-btn active" data-state="all">All</button>
                        <button class="state-btn" data-state="AL">AL</button>
                        <button class="state-btn" data-state="GA">GA</button>
                        <button class="state-btn" data-state="TN">TN</button>
                        <button class="state-btn" data-state="MS">MS</button>
                    </div>
                    <div class="search-box">
                        <input type="text" id="customerSearch" placeholder="Search customers...">
                    </div>
                </div>
                <div class="customers-grid" id="customersGrid">
                    <!-- Customers will be populated here -->
                </div>
            </div>

            <!-- Products View -->
            <div class="view" id="productsView">
                <div class="view-header">
                    <h2>Products</h2>
                    <div class="search-box">
                        <input type="text" id="productSearch" placeholder="Search products...">
                    </div>
                </div>
                <div class="products-grid" id="productsGrid">
                    <!-- Products will be populated here -->
                </div>
            </div>

            <!-- Reports View -->
            <div class="view" id="reportsView">
                <div class="view-header">
                    <h2>Reports</h2>
                </div>
                <div class="reports-dashboard">
                    <div class="report-cards">
                        <div class="report-card">
                            <h3>Sales Summary</h3>
                            <div class="metric-value" id="totalSales">$0.00</div>
                            <div class="metric-label">Total Sales</div>
                        </div>
                        <div class="report-card">
                            <h3>Orders</h3>
                            <div class="metric-value" id="totalOrders">0</div>
                            <div class="metric-label">Total Orders</div>
                        </div>
                        <div class="report-card">
                            <h3>Top Customer</h3>
                            <div class="metric-value" id="topCustomer">â€”</div>
                            <div class="metric-label">By Revenue</div>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-secondary" id="exportOrdersBtn">Export Orders CSV</button>
                        <button class="btn btn-secondary" id="exportReportBtn">Generate Sales Report</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Order Modal -->
        <div class="modal" id="orderModal">
            <div class="modal-content order-modal">
                <div class="modal-header">
                    <h2 id="orderModalTitle">New Order</h2>
                    <button class="modal-close" id="closeOrderModal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="orderForm">
                        <div class="form-section">
                            <h3>Customer Information</h3>
                            <div class="customer-selector">
                                <div class="state-filters-compact">
                                    <button class="state-btn-compact active" data-state="all">All</button>
                                    <button class="state-btn-compact" data-state="AL">AL</button>
                                    <button class="state-btn-compact" data-state="GA">GA</button>
                                    <button class="state-btn-compact" data-state="TN">TN</button>
                                    <button class="state-btn-compact" data-state="MS">MS</button>
                                </div>
                                <div class="form-group">
                                    <label>Search & Select Customer</label>
                                    <input type="text" id="orderCustomerSearch" placeholder="Type to search...">
                                    <select id="orderCustomer" required size="5">
                                        <option value="">Select customer...</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Order Date</label>
                                    <input type="date" id="orderDate" required>
                                </div>
                                <div class="form-group">
                                    <label>PO Number (auto-generated, editable)</label>
                                    <input type="text" id="orderPO" placeholder="Auto-generated">
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Order Items</h3>
                            <div class="order-items" id="orderItems">
                                <!-- Items will be added here -->
                            </div>
                            <button type="button" class="btn btn-secondary btn-block" id="addItemBtn">Add Item</button>
                        </div>

                        <div class="form-section">
                            <div class="order-totals">
                                <div class="total-row">
                                    <span>Subtotal:</span>
                                    <span id="orderSubtotal">$0.00</span>
                                </div>
                                <div class="total-row total-main">
                                    <span>Total:</span>
                                    <span id="orderTotal">$0.00</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" id="cancelOrderBtn">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Order</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Item Modal -->
        <div class="modal" id="itemModal">
            <div class="modal-content item-modal">
                <div class="modal-header">
                    <h2>Add Item</h2>
                    <button class="modal-close" id="closeItemModal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="itemForm">
                        <div class="form-group">
                            <label>Category / Brand</label>
                            <select id="itemCategory" required>
                                <option value="">Select category...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Product</label>
                            <select id="itemProduct" required disabled>
                                <option value="">Select category first...</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Quantity</label>
                                <input type="number" id="itemQuantity" min="1" value="1" required>
                            </div>
                            <div class="form-group">
                                <label>Price</label>
                                <input type="number" id="itemPrice" step="0.01" min="0" required>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" id="cancelItemBtn">Cancel</button>
                            <button type="submit" class="btn btn-primary">Add Item</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- New Customer Modal -->
        <div class="modal" id="customerModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="customerModalTitle">New Customer</h2>
                    <button class="modal-close" id="closeCustomerModal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="customerForm">
                        <div class="form-group">
                            <label>Company Name *</label>
                            <input type="text" id="customerName" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Contact Name</label>
                                <input type="text" id="customerContact">
                            </div>
                            <div class="form-group">
                                <label>Tier</label>
                                <select id="customerTier">
                                    <option value="Main">Main</option>
                                    <option value="High">High</option>
                                    <option value="Medium" selected>Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-section">
                            <h3>Billing Address</h3>
                            <div class="form-group">
                                <label>Street Address</label>
                                <input type="text" id="customerStreet">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>City *</label>
                                    <input type="text" id="customerCity" required>
                                </div>
                                <div class="form-group">
                                    <label>State *</label>
                                    <select id="customerState" required>
                                        <option value="">Select...</option>
                                        <option value="AL">Alabama</option>
                                        <option value="GA">Georgia</option>
                                        <option value="TN">Tennessee</option>
                                        <option value="MS">Mississippi</option>
                                        <option value="WV">West Virginia</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>ZIP Code</label>
                                <input type="text" id="customerZip">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" id="customerPhone">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="customerEmail">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" id="cancelCustomerBtn">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Customer</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="mfc-data.js"></script>
    <script src="app.js"></script>
    <script src="pwa.js"></script>
</body>
</html>
